const translations = {
    ko: {
        nav_home: "홈",
        nav_intro: "소개",
        nav_products: "제품",
        nav_contact: "문의",
        hero_title: "Create Beyond<br>Limits.",
        hero_desc: "우리는 웹, 앱, 게임을 통해 일상의 한계를 넘어서는 새로운 가치를 창출합니다.",
        hero_btn: "제품 보기",
        intro_title: "What We Do",
        web_title: "Web Development",
        web_desc: "고성능 웹 애플리케이션과 세련된 UI/UX 디자인을 제공합니다.",
        app_title: "App Solution",
        app_desc: "모바일 환경에서 최고의 사용자 경험을 선사하는 앱을 개발합니다.",
        game_title: "Game Content",
        game_desc: "몰입감 넘치는 인터랙티브 게임 컨텐츠를 기획하고 제작합니다.",
        contact_header: "Contact Us",
        contact_subheader: "궁금한 점이 있으신가요? 언제든 문의해 주세요.",
        contact_guide_title: "문의하기 전 확인해주세요",
        contact_guide_1: "문의 유형(웹, 앱, 게임 등)을 명확히 적어주시면 빠른 답변이 가능합니다.",
        contact_guide_2: "기획서나 참고 사이트 링크가 있다면 함께 전달 부탁드립니다.",
        contact_guide_3: "영업일 기준 2~3일 내에 회신드리고 있습니다.",
        contact_btn_email: "이메일로 문의하기",
        contact_btn_form: "Google Form 작성하기",
        contact_footer_sns_label: "기타 빠른 문의: ",
        contact_footer_sns_btn: "@potato_studio (SNS)",
        product_header: "Product Showcase",
        prod_web_label: "WEB",
        prod_web_title: "Premium Web App",
        prod_web_desc: "반응형 디자인과 고성능 비즈니스 로직이 결합된 웹 앱입니다.",
        prod_app_label: "APP",
        prod_app_title: "Productivity Tools",
        prod_app_desc: "사용자의 생산성을 극대화하는 직관적인 인터페이스의 앱입니다.",
        prod_game_label: "GAME",
        prod_game_title: "Special Creations",
        prod_game_desc: "화려한 이펙트와 긴장감 넘치는 사이버펑크 스타일의 게임입니다.",
        archive_btn: "보관소 보기",
        archive_header: "Project Archive",
        archive_desc: "다른 중요한 문서들이 보관되어있는 보관소입니다.",
        back_to_products: "제품 목록으로 돌아가기",
        arc_box1_label: "프로젝트",
        arc_box1_title: "제작중인 프로젝트",
        arc_box1_desc: "개발자가 현재 작업 진행중에 있는 프로젝트입니다.",
        arc_box2_label: "프로젝트",
        arc_box2_title: "구버전 프로젝트",
        arc_box2_desc: "서비스를 종료했거나, 업데이트되기 전 작품입니다.",
        arc_box3_label: "문서",
        arc_box3_title: "개인정보 처리방침",
        arc_box3_desc: "일부 프로그램에서 요구하는 개인정보에 대한 처리 방침입니다.",
        arc_box4_label: "소셜",
        arc_box4_title: "연관 링크",
        arc_box4_desc: "개발자의 SNS 링크입니다.",
        header_ongoing: "제작중인 프로젝트",
        header_legacy: "구버전 프로젝트",
        header_privacy: "개인정보 처리방침",
        header_social: "연관 링크",
        back_to_archive: "보관소로 돌아가기",
        privacy_v1: "개인정보 처리방침 (AI 영양사)",
        back_to_privacy: "내역 목록으로 돌아가기",
        social_github: "GitHub",
        social_instagram: "Instagram",
        social_naverblog: "Naver Blog",
        header_prod_web: "Premium Web App",
        header_prod_app: "Productivity Tools",
        header_prod_game: "Special Creations",
        header_app_ai: "AI 영양사",
        prod_web_card_title: "배포 준비 중",
        prod_web_card_desc: "이 웹 서비스는 현재 최종 안정성 테스트 단계에 있습니다. 곧 정식 서비스로 인사드리겠습니다.",
        prod_app_card_title: "AI 영양사",
        prod_app_card_desc: "AI로 식단을 분석하세요! 사진 한장으로 스마트한 영양 관리의 시작.",
        prod_game_card_title: "베타 테스트 준비 중",
        prod_game_card_desc: "더욱 몰입감 넘치는 게임 경험을 위해 밸런스 조정 및 버그 수정 작업을 진행하고 있습니다.",
        back_to_app_list: "앱 목록으로 돌아가기",
        email_copied: "이메일 주소가 복사되었습니다!"
    },
    en: {
        nav_home: "Home",
        nav_intro: "Intro",
        nav_products: "Products",
        nav_contact: "Contact",
        hero_title: "Create Beyond<br>Limits.",
        hero_desc: "We create new values that go beyond the limits of everyday life through web, apps, and games.",
        hero_btn: "View Products",
        intro_title: "What We Do",
        web_title: "Web Development",
        web_desc: "Providing high-performance web applications and sophisticated UI/UX designs.",
        app_title: "App Solution",
        app_desc: "Developing apps that offer the best user experience in mobile environments.",
        game_title: "Game Content",
        game_desc: "Planning and producing immersive interactive game content.",
        contact_header: "Contact Us",
        contact_subheader: "Have any questions? Feel free to contact us anytime.",
        contact_guide_title: "Please check before inquiring",
        contact_guide_1: "Specifying the inquiry type (web, app, game, etc.) allows for a faster response.",
        contact_guide_2: "Please include plan documents or reference site links if available.",
        contact_guide_3: "We usually respond within 2-3 business days.",
        contact_btn_email: "Inquiry via Email",
        contact_btn_form: "Fill out Google Form",
        contact_footer_sns_label: "Other quick inquiries: ",
        contact_footer_sns_btn: "@potato_studio (SNS)",
        product_header: "Product Showcase",
        prod_web_label: "WEB",
        prod_web_title: "Premium Web App",
        prod_web_desc: "A web app combining responsive design and high-performance business logic.",
        prod_app_label: "APP",
        prod_app_title: "Productivity Tools",
        prod_app_desc: "An app with an intuitive interface to maximize user productivity.",
        prod_game_label: "GAME",
        prod_game_title: "Special Creations",
        prod_game_desc: "A cyberpunk-style game with flashy effects and thrilling gameplay.",
        archive_btn: "View Archive",
        archive_header: "Project Archive",
        archive_desc: "This is an archive where other important documents are stored.",
        back_to_products: "Back to Products",
        arc_box1_label: "Project",
        arc_box1_title: "In-progress Project",
        arc_box1_desc: "Projects currently being worked on by the developer.",
        arc_box2_label: "Project",
        arc_box2_title: "Legacy Project",
        arc_box2_desc: "Works that have ended service or are pre-update versions.",
        arc_box3_label: "Document",
        arc_box3_title: "Privacy Policy",
        arc_box3_desc: "Privacy policy regarding personal information required by some programs.",
        arc_box4_label: "Social",
        arc_box4_title: "Related Links",
        arc_box4_desc: "Social media links of the developer.",
        header_ongoing: "Ongoing Projects",
        header_legacy: "Legacy Projects",
        header_privacy: "Privacy Policy",
        header_social: "Social Links",
        back_to_archive: "Back to Archive",
        privacy_v1: "Privacy Policy (AI Nutritionist)",
        back_to_privacy: "Back to Policy List",
        social_github: "GitHub",
        social_instagram: "Instagram",
        social_naverblog: "Naver Blog",
        header_prod_web: "Premium Web App",
        header_prod_app: "Productivity Tools",
        header_prod_game: "Special Creations",
        header_app_ai: "AI Nutritionist",
        prod_web_card_title: "Deployment in Progress",
        prod_web_card_desc: "This web service is currently in the final stability testing phase. We will be back with the official service soon.",
        prod_app_card_title: "AI Nutritionist",
        prod_app_card_desc: "Analyze your diet with AI! Start smart nutrition management with just one photo.",
        prod_game_card_title: "Beta Test Preparation",
        prod_game_card_desc: "We are working on balance adjustments and bug fixes for a more immersive gaming experience.",
        back_to_app_list: "Back to App List",
        email_copied: "Email address copied!"
    },
    es: {
        nav_home: "Inicio",
        nav_intro: "Introducción",
        nav_products: "Productos",
        nav_contact: "Contacto",
        hero_title: "Crear más allá<br>de los límites.",
        hero_desc: "Creamos nuevos valores que superan los límites de la vida cotidiana a través de la web, las aplicaciones y los juegos.",
        hero_btn: "Ver productos",
        intro_title: "Qué hacemos",
        web_title: "Desarrollo web",
        web_desc: "Proporcionamos aplicaciones web de alto rendimiento y diseños UI/UX sofisticados.",
        app_title: "Solución de aplicaciones",
        app_desc: "Desarrollamos aplicaciones que ofrecen la mejor experiencia de usuario en entornos móviles.",
        game_title: "Contenido del juego",
        game_desc: "Planificación y producción de contenidos de juegos interactivos inmersivos.",
        contact_header: "Contáctenos",
        contact_subheader: "¿Tiene alguna pregunta? No dude en contactarnos en cualquier momento.",
        contact_guide_title: "Por favor, compruebe antes de preguntar",
        contact_guide_1: "Especificar el tipo de consulta (web, aplicación, juego, etc.) permite una respuesta más rápida.",
        contact_guide_2: "Incluya documentos de plan o enlaces de sitios de referencia si están disponibles.",
        contact_guide_3: "Normalmente respondemos dentro de 2-3 días hábiles.",
        contact_btn_email: "Consulta por correo electrónico",
        contact_btn_form: "Completar formulario de Google",
        contact_footer_sns_label: "Otras consultas rápidas: ",
        contact_footer_sns_btn: "@potato_studio (SNS)",
        product_header: "Escaparate de productos",
        prod_web_label: "WEB",
        prod_web_title: "Aplicación web premium",
        prod_web_desc: "Una aplicación web que combina diseño receptivo y lógica empresarial de alto rendimiento.",
        prod_app_label: "APP",
        prod_app_title: "Herramientas de productividad",
        prod_app_desc: "Una aplicación con una interfaz intuitiva para maximizar la productividad del usuario.",
        prod_game_label: "JUEGO",
        prod_game_title: "Special Creations",
        prod_game_desc: "Un juego de estilo cyberpunk con efectos llamativos y una jugabilidad emocionante.",
        archive_btn: "Ver Archivo",
        archive_header: "Archivo de Proyectos",
        archive_desc: "Este es un archivo donde se almacenan otros documentos importantes.",
        back_to_products: "Volver a Productos",
        arc_box1_label: "Proyecto",
        arc_box1_title: "Proyecto en curso",
        arc_box1_desc: "Proyectos en los que el desarrollador está trabajando actualmente.",
        arc_box2_label: "Proyecto",
        arc_box2_title: "Proyecto antiguo",
        arc_box2_desc: "Obras que han finalizado su servicio o son versiones anteriores a las actualizaciones.",
        arc_box3_label: "Documento",
        arc_box3_title: "Política de privacidad",
        arc_box3_desc: "Política de tratamiento de la información personal requerida por some programas.",
        arc_box4_label: "Social",
        arc_box4_title: "Enlaces relacionados",
        arc_box4_desc: "Enlaces a las redes sociales del desarrollador.",
        header_ongoing: "Proyectos en curso",
        header_legacy: "Proyectos antiguos",
        header_privacy: "Política de privacidad",
        header_social: "Enlaces sociales",
        back_to_archive: "Volver al archivo",
        privacy_v1: "Política de privacidad (Nutricionista con IA)",
        back_to_privacy: "Volver a la lista",
        social_github: "GitHub",
        social_instagram: "Instagram",
        social_naverblog: "Naver Blog",
        header_prod_web: "Premium Web App",
        header_prod_app: "Productivity Tools",
        header_prod_game: "Special Creations",
        header_app_ai: "Nutricionista con IA",
        prod_web_card_title: "Despliegue en curso",
        prod_web_card_desc: "Este servicio web se encuentra actualmente en la fase final de pruebas de estabilidad. Volveremos pronto con el servicio oficial.",
        prod_app_card_title: "Nutricionista con IA",
        prod_app_card_desc: "¡Analiza tu alimentación con IA!",
        prod_game_card_title: "Preparación de la prueba beta",
        prod_game_card_desc: "Estamos trabajando en ajustes de equilibrio y corrección de errores para una experiencia de juego más inmersiva.",
        back_to_app_list: "Volver a la lista de aplicaciones",
        email_copied: "¡Dirección de correo copiada!"
    },
    zh: {
        nav_home: "首页",
        nav_intro: "介绍",
        nav_products: "产品",
        nav_contact: "联系我们",
        hero_title: "创造超越<br>极限。",
        hero_desc: "我们通过网页、应用和游戏，创造超越日常生活极限的新价值。",
        hero_btn: "查看产品",
        intro_title: "我们做什么",
        web_title: "网站开发",
        web_desc: "提供高性能的网页应用和先进的 UI/UX 设计。",
        app_title: "应用方案",
        app_desc: "开发在移动环境中提供最佳用户体验的应用。",
        game_title: "游戏内容",
        game_desc: "策划并制作沉浸式互动游戏内容。",
        contact_header: "联系我们",
        contact_subheader: "有什么问题吗？请随时联系我们。",
        contact_guide_title: "咨询前请核对",
        contact_guide_1: "明确咨询类型（网页、应用、游戏等）可以实现快速回复。",
        contact_guide_2: "如果有策划书或参考网站链接，请一并提交。",
        contact_guide_3: "我们通常在 2-3 个工作日内回复。",
        contact_btn_email: "通过电子邮件咨询",
        contact_btn_form: "填写 Google 表单",
        contact_footer_sns_label: "其他快速咨询：",
        contact_footer_sns_btn: "@potato_studio (SNS)",
        product_header: "产品展示",
        prod_web_label: "网页",
        prod_web_title: "高级网页应用",
        prod_web_desc: "结合响应式设计和高性能业务逻辑的网页应用。",
        prod_app_label: "应用",
        prod_app_title: "生产力工具",
        prod_app_desc: "具有直截了当界面的应用，可最大限度地提高用户生产力。",
        prod_game_label: "游戏",
        prod_game_title: "Special Creations",
        prod_game_desc: "一款具有华丽效果和惊险玩法的赛博朋克风格游戏。",
        archive_btn: "查看存档",
        archive_header: "项目存档",
        archive_desc: "这是存放其他重要文件的存档。",
        back_to_products: "回到产品列表",
        arc_box1_label: "项目",
        arc_box1_title: "进行中的项目",
        arc_box1_desc: "开发者目前正在进行中的项目。",
        arc_box2_label: "项目",
        arc_box2_title: "旧版本项目",
        arc_box2_desc: "已停止服务或更新前的作品。",
        arc_box3_label: "文档",
        arc_box3_title: "隐私政策",
        arc_box3_desc: "部分程序所需的个人信息处理政策。",
        arc_box4_label: "社交",
        arc_box4_title: "相关链接",
        arc_box4_desc: "开发者的社交媒体链接。",
        header_ongoing: "进行中的项目",
        header_legacy: "旧版本项目",
        header_privacy: "隐私政策",
        header_social: "社交链接",
        back_to_archive: "回到存档",
        privacy_v1: "隐私政策 (AI 营养师)",
        back_to_privacy: "返回列表",
        social_github: "GitHub",
        social_instagram: "Instagram",
        social_naverblog: "Naver Blog",
        header_prod_web: "Premium Web App",
        header_prod_app: "Productivity Tools",
        header_prod_game: "Special Creations",
        header_app_ai: "AI 营养师",
        prod_web_card_title: "正在准备部署",
        prod_web_card_desc: "该网络服务目前正处于最终稳定性测试阶段。我们很快就会以正式服务与您见面。",
        prod_app_card_title: "AI 营养师",
        prod_app_card_desc: "用 AI 分析你的饮食！ 一张照片，开启智能营养管理的第一步。",
        prod_game_card_title: "贝塔测试准备中",
        prod_game_card_desc: "我们正在进行平衡调整和错误修复，以提供更具沉浸感的游玩体验。",
        back_to_app_list: "回到应用列表",
        email_copied: "电子邮箱地址已复制！"
    },
    ja: {
        nav_home: "ホーム",
        nav_intro: "紹介",
        nav_products: "製品",
        nav_contact: "お問い合わせ",
        hero_title: "限界を<br>超えて創造する。",
        hero_desc: "ウェブ、アプリ、ゲームを通じて、日常の限界を超える新しい価値を創造します。",
        hero_btn: "製品を見る",
        intro_title: "私たちがすること",
        web_title: "ウェブ開発",
        web_desc: "高性能なウェブアプリケーションと洗練された UI/UX デザインを提供します。",
        app_title: "アプリソリューション",
        app_desc: "モバイル環境で最高のユーザー体験を提供するアプリを開発します。",
        game_title: "ゲームコンテンツ",
        game_desc: "没入感のあるインタラクティブなゲームコンテンツを企画・制作します。",
        contact_header: "お問い合わせ",
        contact_subheader: "ご不明な点はありますか？いつでもお気軽にお問い合わせください。",
        contact_guide_title: "お問い合わせの前にご確認ください",
        contact_guide_1: "お問い合わせの種類（ウェブ、アプリ、ゲームなど）を明確に記載いただくと、迅速な回答が可能です。",
        contact_guide_2: "企画書や参考サイトの リンクがある場合は、併せてお送りください。",
        contact_guide_3: "通常 2〜3 営業日以内に回答いたします。",
        contact_btn_email: "メールでお問い合わせ",
        contact_btn_form: "Google フォームに入力",
        contact_footer_sns_label: "その他のお問い合わせ：",
        contact_footer_sns_btn: "@potato_studio (SNS)",
        product_header: "製品ショーケース",
        prod_web_label: "ウェブ",
        prod_web_title: "プレミアムウェブアプリ",
        prod_web_desc: "レスポンシブデザインと高性能なビジネスロジックを組み合わせたウェブアプリです。",
        prod_app_label: "アプリ",
        prod_app_title: "生産性向上ツール",
        prod_app_desc: "ユーザーの生産性を最大化する直感的なインターフェースのアプリです。",
        prod_game_label: "ゲーム",
        prod_game_title: "Special Creations",
        prod_game_desc: "派手なエフェクトとスリリングなゲームプレイが特徴のサイバーパンクスタイルのゲームです。",
        archive_btn: "アーカイブを見る",
        archive_header: "プロジェクトアーカイブ",
        archive_desc: "他の重要な文書が保管されているアーカイブです。",
        back_to_products: "製品一覧に戻る",
        arc_box1_label: "プロジェクト",
        arc_box1_title: "制作中のプロジェクト",
        arc_box1_desc: "開発者が現在作業進行中のプロジェクトです。",
        arc_box2_label: "プロジェクト",
        arc_box2_title: "旧バージョンプロジェクト",
        arc_box2_desc: "サービスを終了したか、アップデートされる前の作品です。",
        arc_box3_label: "文書",
        arc_box3_title: "個人情報処理方針",
        arc_box3_desc: "一部のプログラムで要求される個人情報の取り扱いに関する方針です。",
        arc_box4_label: "ソーシャル",
        arc_box4_title: "関連リンク",
        arc_box4_desc: "開発者のSNSリンクです。",
        header_ongoing: "制作中のプロジェクト",
        header_legacy: "旧バージョンプロジェクト",
        header_privacy: "個人情報処理方針",
        header_social: "関連リンク",
        back_to_archive: "アーカイブに戻る",
        privacy_v1: "個人情報処理方針 (AI栄養士)",
        back_to_privacy: "リストに戻る",
        social_github: "GitHub",
        social_instagram: "Instagram",
        social_naverblog: "Naver Blog",
        header_prod_web: "Premium Web App",
        header_prod_app: "Productivity Tools",
        header_prod_game: "Special Creations",
        header_app_ai: "AI栄養士",
        prod_web_card_title: "デプロイ準備中",
        prod_web_card_desc: "このウェブサービスは現在、最終的な安定性テストの段階にあります。まもなく正式サービスとしてお会いしましょう。",
        prod_app_card_title: "AI栄養士",
        prod_app_card_desc: "AIで食事を分析！ 写真1枚で、スマートな栄養管理を始めましょう。",
        prod_game_card_title: "ベータテスト準備中",
        prod_game_card_desc: "より没入感のあるゲーム体験のため、バランス調整とバグ修正を行っています。",
        back_to_app_list: "アプリ一覧に戻る",
        email_copied: "メールアドレスがコピーされました！"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Add smooth scrolling for navigation
    const navLinks = document.querySelectorAll('.nav-links a');

    // --- Language Switcher Logic ---
    const langBtn = document.getElementById('langBtn');
    const langDropdown = document.getElementById('langDropdown');
    const currentLang = localStorage.getItem('siteLang') || 'ko';

    const setLanguage = (lang) => {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                el.innerHTML = translations[lang][key];
            }
        });
        localStorage.setItem('siteLang', lang);

        // Update active state in dropdown
        document.querySelectorAll('.lang-dropdown button').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
        });
    };

    // Initialize Language
    setLanguage(currentLang);

    if (langBtn) {
        langBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            langDropdown.classList.toggle('show');
        });
    }

    // --- Dynamic Scroll Lock & Auto-Snap (Homepage only) ---
    const homeHero = document.getElementById('hero');
    const homeIntro = document.getElementById('intro');

    if (homeHero && homeIntro) {
        let lastScrollY = window.scrollY;

        const updateScrollLock = () => {
            const scrollPos = window.scrollY;
            const heroHeight = homeHero.offsetHeight;
            const isScrollingUp = scrollPos < lastScrollY;

            // If we are at the very top (Hero section)
            if (scrollPos < 50) {
                document.body.classList.add('lock-scroll');
            }
            // Auto-snap back to hero if scrolling up and approaching it
            else if (isScrollingUp && scrollPos < 200) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                document.body.classList.add('lock-scroll');
            }
            else if (scrollPos > heroHeight * 0.5) {
                document.body.classList.remove('lock-scroll');
            }

            lastScrollY = scrollPos;
        };

        // Initial check
        updateScrollLock();

        // Listen for navigation clicks to unlock temporarily
        document.querySelectorAll('a[href*="#intro"]').forEach(link => {
            link.addEventListener('click', () => {
                document.body.classList.remove('lock-scroll');
                // We update lastScrollY to prevent immediate snap-back if user was near top
                setTimeout(() => { lastScrollY = window.scrollY; }, 100);
            });
        });

        // Re-lock if jumping back to hero
        document.querySelectorAll('a[href*="#hero"]').forEach(link => {
            link.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                document.body.classList.add('lock-scroll');
            });
        });

        window.addEventListener('scroll', updateScrollLock);
    }

    // --- Restore Language Dropdown & Animations ---
    document.querySelectorAll('.lang-dropdown button').forEach(btn => {
        btn.addEventListener('click', () => {
            const selectedLang = btn.getAttribute('data-lang');
            setLanguage(selectedLang);
            if (langDropdown) langDropdown.classList.remove('show');
        });
    });

    document.addEventListener('click', () => {
        if (langDropdown) langDropdown.classList.remove('show');
    });

    const glassCards = document.querySelectorAll('.glass');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.1 });

    glassCards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
        observer.observe(card);
    });

    // --- Mobile Menu Toggle ---
    const menuToggle = document.getElementById('menuToggle');
    const navLinksContainer = document.getElementById('navLinks');

    if (menuToggle && navLinksContainer) {
        menuToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            const isActive = navLinksContainer.classList.toggle('active');
            menuToggle.classList.toggle('active');

            // Prevent scrolling when menu is open
            if (isActive) {
                document.body.style.overflow = 'hidden';
            } else {
                // Restore scroll based on page state (lock-scroll might still be active on homepage)
                if (!document.body.classList.contains('lock-scroll')) {
                    document.body.style.overflow = '';
                }
            }
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navLinksContainer.contains(e.target) && !menuToggle.contains(e.target)) {
                if (navLinksContainer.classList.contains('active')) {
                    navLinksContainer.classList.remove('active');
                    menuToggle.classList.remove('active');
                    if (!document.body.classList.contains('lock-scroll')) {
                        document.body.style.overflow = '';
                    }
                }
            }
        });

        // Close menu when clicking a link
        navLinksContainer.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navLinksContainer.classList.remove('active');
                menuToggle.classList.remove('active');
                if (!document.body.classList.contains('lock-scroll')) {
                    document.body.style.overflow = '';
                }
            });
        });
    }
});

// Global copy email function
function copyEmail() {
    const email = "potatobback@gmail.com";
    navigator.clipboard.writeText(email).then(() => {
        const msg = translations[localStorage.getItem('siteLang') || 'ko']?.email_copied || "Email copied!";
        alert(msg);
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}
